#: import BoxLayout_header smac_widgets.smac_layouts.BoxLayout_header
#: import BoxLayout_container smac_widgets.smac_layouts.BoxLayout_container
#: import SMAC_DEVICES smac_device_keys.SMAC_DEVICES


<Screen_network>:
    FloatLayout:
        BoxLayout:
            orientation: "vertical"
            BoxLayout_header:
                Image_iconButton:
                    source: app.source_icon + 'HOME.png'
                    on_release:
                        root.open_close_menu()
                Label:
                    text: app.APP_DATA["name_home"]
                    color: app.colors["COLOR_TEXT"]
                    size_hint_y: None
                    height: app.grid_min
                #Button:
                #    id: id_btn
                #	text: "SEND INFO"
                #	on_release:
                #		app.send_info()

            ScrollView:
                size_hint_y: 1
                BoxLayout_container:
                    id: id_network_container
                    spacing: dp(10)
        Widget_menuBG:
            id: id_menu_bg
            pos: self.pos
            size_hint: 0,1
            opacity:.5
            on_release:
                root.open_close_menu()
            canvas.before:
                Color:
                    rgba: app.colors["COLOR_MENU_BG"]
                Rectangle:
                    size: self.size
                    pos: self.pos
        ScrollView:
            size_hint: None, 1
            width: 0
            pos: 0,0
            id: id_menu_container
            canvas.before:
                Color:
                    rgba: app.colors["COLOR_THEME_BASIC"]
                Rectangle:
                    size: self.size
                    pos: self.pos
            #size_hint_y: 1
            BoxLayout_menu:
                id: id_menu
                padding: dp(2)
                spacing: dp(2)
                Label_menuItem:
                    text: "Theme"
                    bg_color: app.colors["COLOR_THEME_BASIC_2"]
                    Widget_switch:
                        pos: self.parent.right - self.width - dp(10), self.parent.y
                        #value: 1 if(app.theme == "DARK") else 0
                        on_value:
                            app.theme = "LIGHT" if(app.theme=="DARK") else "DARK"
                Label_menuItem:
                    text: "Select Home"
                    bg_color: app.colors["COLOR_THEME"]

                #Widget:
                #    size_hint: 1, None
                #    height: app.grid_min
                    #pos: root.pos
                #    Label_custom:
                #        text: "Theme"
                #        pos: self.parent.pos
                #        id: id_theme
                #        color: app.colors["COLOR_TEXT"]

                Label_menuItem:
                    text: "Local"
                    #bg_color: app.colors["COLOR_THEME"]
                    on_release:
                        #self.bg_color: get_color_from_hex("#c9c9c9")
                        root.on_menu_item_release(self)



<Screen_deviceSetting>:
    BoxLayout:
		orientation: "vertical"
		BoxLayout_header:
		    Image_iconButton:
		        source: app.source_icon + "LEFT.png"
		        on_release:
		            app.change_screen("Screen_network")
			Label:
				text: root.name
				color: app.colors["COLOR_TEXT"]
		ScrollView:
			size_hint_y: 1
			BoxLayout_container:
				spacing: dp(5)
				padding: dp(5)
				Widget_block:
				    text: "Device Name"
                    BoxLayout:
				        size_hint: 1, None
				        height: app.grid_min
				        TextInput_custom:
                            hint_text: "Device Name"
                            id: id_name_device
                            text: app.APP_DATA["name_device"]
                            #disabled: 1 if(app.APP_DATA["id_device"] != app.ID_DEVICE) else 0
                        Button_custom1:
                            text: 'Update Name'
                            #disabled: 1 if(app.APP_DATA["id_device"] != app.ID_DEVICE) else 0
                            on_release:
                                root.update_device_name(app.APP_DATA["id_device"], id_name_device.text)
				Widget_block:
				    text: "Add device to a Home"
				    size_hint_y: None
				    height: self.minimum_height
				    orientation: 'vertical'
				    spacing: dp(2)
				    #BoxLayout:
				    #    size_hint: 1, None
				    #    height: self.minimum_height
				    #    orientation: 'vertical'
                    Dropdown_custom:
                        text: "select Home"
                        id: id_dropdown_home_container
                        height: app.grid_min
                    #Button_custom1:
                    Dropdown_custom:
                        text: "select Room"
                        id: id_dropdown_room_container
                        height: app.grid_min
                    Button_custom1:
                        text: 'Add Device'
                        on_release:
                            root.subscribe_topic(id_dropdown_home_container, id_dropdown_room_container)
                            #app.send_req_delete_topic(id_ip_topic.text, id_ip_device.text, id_ip_passkey.text)
                            #app.send_req_add_topic(id_ip_topic.text, id_ip_device.text, id_ip_passkey.text)
                #Widget_block:
				#    text: "Create a Home"
                #    BoxLayout:
				#        size_hint: 1, None
				#        height: app.grid_min
                #        TextInput_custom:
                #            hint_text: "Home"
                #            id: id_name_home
                #        TextInput_custom:
                #            hint_text: "Room"
                #            id: id_name_room
                #        Button_custom1:
                #            text: 'add home'
                #            on_release:
                #                root.add_home(id_name_home.text, id_name_room.text)
                Widget_block:
				    text: "Remove this device from a Home"
                    BoxLayout:
                        orientation: 'vertical'
				        size_hint: 1, None
				        height: self.minimum_height
				        id: id_device_container
                Widget_block:
				    text: "Update Passkey of the device"
                    BoxLayout:
				        size_hint: 1, None
				        height: app.grid_min
				        TextInput_custom:
                            hint_text: "PIN"
                            id: id_passkey
                            password: True
                        Button_custom1:
                            text: 'Update PIN'
                            on_release:
                                root.update_device_pin(app.APP_DATA["id_device"], id_passkey.text)
                Widget_block:
				    text: "Update Online Interval of the device"
                    BoxLayout:
				        size_hint: 1, None
				        height: app.grid_min
				        TextInput_custom:
                            hint_text: "Interval"
                            id: id_interval_online
                            text: str(root.data["interval_online"])
                            #cursor: 0,0
                            #password: True
                        Button_custom1:
                            text: 'Update Interval'
                            on_release:
                                root.update_device_interval_online(app.APP_DATA["id_device"], id_interval_online.text)


                Widget_block:
				    text: "Update Wifi Config"
				    disabled: 0 if(str(app.APP_DATA["type_device"]) == SMAC_DEVICES["ESP"]) else 1
				    #opacity: 1 - self.disabled
				    height:  self.minimum_height
                    BoxLayout:
                        orientation: 'vertical'
				        size_hint: 1, None
				        height: self.minimum_height
				        TextInput_custom:
                            hint_text: "SSID"
                            id: id_ssid
                            size_hint_y: None
                            height: app.grid_min
                        TextInput_custom:
                            hint_text: "Password"
                            id: id_password
                            size_hint_y: None
                            height: app.grid_min
                        Button_custom1:
                            text: 'Update Wifi Config'
                            width: app.grid_min*3
                            #height: 0 if root.disabled else  app.grid_min
                            on_release:
                                root.update_device_wifi_config(app.APP_DATA["id_device"], id_ssid.text, id_password.text)

                Widget_block:
				    text: "Device Updates and Downloads"
				    disabled: 0 if( str(app.APP_DATA["type_device"]) == SMAC_DEVICES["ESP"]) else 1
				    #opacity: 1 - self.disabled
				    #height: 0 if self.disabled else self.minimum_height
				    on_parent:
				        print("on child")
				        print(app.APP_DATA['type_device'])
				        print(SMAC_DEVICES["ESP"])
                    BoxLayout:
                        orientation: 'vertical'
				        size_hint: 1, None
				        height: self.minimum_height
                        Button_custom1:
                            text: 'Check for Updates and Download'
                            width: '200dp'
                            #height: 0 if root.disabled else app.grid_min
                            on_release:
                                root.update_software(app.APP_DATA["id_device"])


